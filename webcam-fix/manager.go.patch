--- a/server/internal/capture/manager.go
+++ b/server/internal/capture/manager.go
@@ -143,33 +143,42 @@ func New(desktop types.DesktopManager, config *config.Capture) *CaptureManagerCt
 		video: streamSelectorNew(config.VideoCodec, videos, config.VideoIDs),

 		// sources
-		webcam: streamSrcNew(config.WebcamEnabled, map[string]string{
+		// WEBCAM FIX: Use shmsink instead of v4l2sink to bypass V4L2_CAP_VIDEO_OUTPUT capability check
+		// The webcam frames will be written to shared memory and read by an external FFmpeg process
+		// that writes to v4l2loopback. This works around GStreamer v4l2sink's strict capability checking.
+		//
+		// Alternative approach using fdsink to pipe directly to FFmpeg:
+		// The pipeline ends with fdsink which writes raw video to a named pipe (FIFO)
+		// An external FFmpeg process reads from the FIFO and writes to v4l2loopback
+		webcam: streamSrcNew(config.WebcamEnabled, map[string]string{
 			codec.VP8().Name: "appsrc format=time is-live=true do-timestamp=true name=appsrc " +
 				fmt.Sprintf("! application/x-rtp, payload=%d, encoding-name=VP8-DRAFT-IETF-01 ", codec.VP8().PayloadType) +
 				"! rtpvp8depay " +
 				"! decodebin " +
 				"! videoconvert " +
+				"! videorate " +
+				"! videoscale " +
 				fmt.Sprintf("! video/x-raw,format=I420,width=%d,height=%d ", config.WebcamWidth, config.WebcamHeight) +
-				"! videorate " +
-				"! videoscale " +
-				"! identity drop-allocation=true " +
-				fmt.Sprintf("! v4l2sink sync=false device=%s", config.WebcamDevice),
-			// TODO: Test this pipeline.
+				fmt.Sprintf("! shmsink socket-path=/tmp/neko-webcam-shm wait-for-connection=false shm-size=20000000 sync=false"),
 			codec.VP9().Name: "appsrc format=time is-live=true do-timestamp=true name=appsrc " +
 				"! application/x-rtp " +
 				"! rtpvp9depay " +
 				"! decodebin " +
 				"! videoconvert " +
+				"! videorate " +
+				"! videoscale " +
 				fmt.Sprintf("! video/x-raw,format=I420,width=%d,height=%d ", config.WebcamWidth, config.WebcamHeight) +
-				"! videorate " +
-				"! videoscale " +
-				"! identity drop-allocation=true " +
-				fmt.Sprintf("! v4l2sink sync=false device=%s", config.WebcamDevice),
-			// TODO: Test this pipeline.
+				fmt.Sprintf("! shmsink socket-path=/tmp/neko-webcam-shm wait-for-connection=false shm-size=20000000 sync=false"),
 			codec.H264().Name: "appsrc format=time is-live=true do-timestamp=true name=appsrc " +
 				"! application/x-rtp " +
 				"! rtph264depay " +
 				"! decodebin " +
 				"! videoconvert " +
+				"! videorate " +
+				"! videoscale " +
 				fmt.Sprintf("! video/x-raw,format=I420,width=%d,height=%d ", config.WebcamWidth, config.WebcamHeight) +
-				"! videorate " +
-				"! videoscale " +
-				"! identity drop-allocation=true " +
-				fmt.Sprintf("! v4l2sink sync=false device=%s", config.WebcamDevice),
+				fmt.Sprintf("! shmsink socket-path=/tmp/neko-webcam-shm wait-for-connection=false shm-size=20000000 sync=false"),
 		}, "webcam"),
